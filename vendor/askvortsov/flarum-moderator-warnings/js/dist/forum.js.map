{"version":3,"sources":["webpack://@askvortsov/flarum-moderator-warnings/webpack/bootstrap","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['app']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['Model']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['Component']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['helpers/username']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/Button']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['extend']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/ItemList']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['models/User']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/UserPage']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/Link']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/Stream']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['helpers/humanTime']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/NotificationGrid']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/PostControls']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/UserControls']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/Modal']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/LinkButton']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/Dropdown']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['helpers/avatar']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/classList']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/PostPreview']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/Separator']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['helpers/listItems']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['models/Post']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/CommentPost']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['helpers/icon']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/Notification']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/computed']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/string']\"","webpack://@askvortsov/flarum-moderator-warnings/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningModal.js","webpack://@askvortsov/flarum-moderator-warnings/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningPost.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningControls.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningListItem.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningList.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningPage.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/addWarningPage.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningPreview.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/PostWarning.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/PostWarningList.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningNotification.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/model/Warning.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/index.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/addWarningControl.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/addWarningsToPosts.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","flarum","core","compat","_inheritsLoose","subClass","superClass","constructor","__proto__","WarningModal","oninit","vnode","this","publicComment","Stream","privateComment","strikes","className","title","app","translator","trans","username","attrs","user","content","type","bidi","min","max","required","rows","loading","onsubmit","e","preventDefault","alerts","dismiss","successAlert","newWarning","userId","id","public_comment","private_comment","post","store","createRecord","save","then","hide","show","callback","Modal","_extends","assign","target","arguments","length","source","apply","WarningPost","view","class","PostPreview","component","oncreate","$","css","Component","controls","warning","context","items","ItemList","forEach","section","toArray","item","add","itemName","Separator","userControls","moderationControls","destructiveControls","isHidden","session","canManageWarnings","icon","onclick","hideAction","restoreAction","canDeleteWarnings","deleteAction","pushAttributes","hiddenAt","Date","hiddenUser","redraw","location","reload","WarningListItem","addedByUser","WarningControls","elementAttrs","Dropdown","buttonClassName","href","route","dom","tooltip","placement","avatar","transChoice","time","humanTime","createdAt","trust","classList","WarningList","warnings","params","refresh","LoadingIndicator","strikeCount","listItems","actionItems","map","data-id","handleOnClickCreate","filter","reduce","a","b","parseResults","results","push","find","modal","WarningPage","loadUser","param","canViewWarnings","visibleWarningCount","sort","UserPage","routes","path","extend","LinkButton","WarningPreview","warnedUser","PostWarning","mod_username","timeout","hidePreview","removeClass","one","$preview","append","children","hover","clearTimeout","setTimeout","hasClass","is","render","off","addClass","data","PostWarningList","WarningNotification","notification","subject","fromUser","Notification","Warnings","Model","attribute","transformDate","computed","hasOne","hiddenByUser","initializers","models","Warning","User","PostControls","UserControls","addWarningPage","Post","hasMany","CommentPost","notificationComponents","NotificationGrid","label"],"mappings":"2BACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QA0Df,OArDAF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,I,gBClFrDhC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAY,K,cCAzCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAc,O,cCA3CnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAkB,W,cCA/CnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,qB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,sB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAe,Q,cCA5CnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,mB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,gB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,wB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,oB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,iB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,sB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,gC,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,uB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,uB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,qB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,0B,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,gC,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,wB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,mB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,oB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,2B,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,yB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,sB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,gB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,2B,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,iB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,4B,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,mB,cCApCnC,E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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 31);\n","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['helpers/username'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['models/User'];","module.exports = flarum.core.compat['components/UserPage'];","module.exports = flarum.core.compat['components/Link'];","module.exports = flarum.core.compat['utils/Stream'];","module.exports = flarum.core.compat['helpers/humanTime'];","module.exports = flarum.core.compat['components/NotificationGrid'];","module.exports = flarum.core.compat['utils/PostControls'];","module.exports = flarum.core.compat['utils/UserControls'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/LinkButton'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['components/Dropdown'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['utils/classList'];","module.exports = flarum.core.compat['components/PostPreview'];","module.exports = flarum.core.compat['components/Separator'];","module.exports = flarum.core.compat['helpers/listItems'];","module.exports = flarum.core.compat['models/Post'];","module.exports = flarum.core.compat['components/CommentPost'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['components/Notification'];","module.exports = flarum.core.compat['utils/computed'];","module.exports = flarum.core;","module.exports = flarum.core.compat['utils/string'];","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import Modal from \"flarum/components/Modal\";\nimport Button from \"flarum/components/Button\";\nimport username from \"flarum/helpers/username\";\nimport Stream from \"flarum/utils/Stream\";\n\nexport default class WarningModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.publicComment = Stream(\"\");\n    this.privateComment = Stream(\"\");\n    this.strikes = Stream(0);\n  }\n\n  className() {\n    return \"WarningsModal Modal--large\";\n  }\n\n  title() {\n    return app.translator.trans(\n      \"askvortsov-moderator-warnings.forum.warning_modal.heading\",\n      { username: username(this.attrs.user) }\n    );\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form Form--centered\">\n          <div className=\"Form-group\">\n            <div>\n              <label>\n                {app.translator.trans(\n                  \"askvortsov-moderator-warnings.forum.warning_modal.strikes_heading\"\n                )}\n                <input\n                  type=\"number\"\n                  className=\"FormControl\"\n                  bidi={this.strikes}\n                  min=\"0\"\n                  max=\"5\"\n                ></input>\n              </label>\n            </div>\n          </div>\n          <div className=\"Form-group\">\n            <div>\n              <label>\n                {app.translator.trans(\n                  \"askvortsov-moderator-warnings.forum.warning_modal.public_comment_heading\",\n                  {\n                    username: username(this.attrs.user),\n                  }\n                )}\n                <textarea\n                  className=\"FormControl\"\n                  bidi={this.publicComment}\n                  required={true}\n                  rows=\"6\"\n                />\n              </label>\n            </div>\n          </div>\n          <div className=\"Form-group\">\n            <div>\n              <label>\n                {app.translator.trans(\n                  \"askvortsov-moderator-warnings.forum.warning_modal.private_comment_heading\",\n                  {\n                    username: username(this.attrs.user),\n                  }\n                )}\n                <textarea\n                  className=\"FormControl\"\n                  bidi={this.privateComment}\n                  rows=\"6\"\n                />\n              </label>\n            </div>\n          </div>\n          <div className=\"Form-group\">\n            <Button\n              className=\"Button Button--primary Button--block\"\n              type=\"submit\"\n              loading={this.loading}\n            >\n              {app.translator.trans(\n                \"askvortsov-moderator-warnings.forum.warning_modal.submit_button\"\n              )}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    app.alerts.dismiss(this.successAlert);\n\n    this.loading = true;\n\n    if (!this.strikes()) {\n      this.strikes(0);\n    }\n\n    const newWarning = {\n      userId: this.attrs.user.id(),\n      strikes: this.strikes(),\n      public_comment: this.publicComment(),\n      private_comment: this.privateComment(),\n    };\n\n    if (this.attrs.post) {\n      newWarning.post = this.attrs.post;\n    }\n\n    app.store\n      .createRecord(\"warnings\")\n      .save(newWarning)\n      .then(this.hide.bind(this))\n      .then(\n        (this.successAlert = app.alerts.show(\n          { type: \"success\" },\n          app.translator.trans(\n            \"askvortsov-moderator-warnings.forum.warning_modal.confirmation_message\"\n          )\n        ))\n      )\n      .then(this.attrs.callback)\n      .catch(() => {});\n  }\n}\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","import Component from \"flarum/Component\";\nimport PostPreview from \"flarum/components/PostPreview\";\n\nexport default class WarningPost extends Component {\n  view() {\n    return (\n      <div className=\"WarningPost\">\n        <ul class=\"Dropdown-menu PostPreview-preview fade in\">\n          <li>{PostPreview.component({ post: this.attrs.post })}</li>\n        </ul>\n      </div>\n    );\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    this.$(\".PostPreview-preview\").show().css(\"position\", \"relative\");\n  }\n}\n","import Button from \"flarum/components/Button\";\nimport Separator from \"flarum/components/Separator\";\nimport ItemList from \"flarum/utils/ItemList\";\n\n/**\n * The `WarningControls` utility constructs a list of buttons for a warning which\n * perform actions on it.\n */\nexport default {\n  /**\n   * Get a list of controls for a warning.\n   *\n   * @param {Warning} warning\n   * @param {*} context The parent component under which the controls menu will\n   *     be displayed.\n   * @return {ItemList}\n   * @public\n   */\n  controls(warning, context) {\n    const items = new ItemList();\n\n    [\"user\", \"moderation\", \"destructive\"].forEach((section) => {\n      const controls = this[section + \"Controls\"](warning, context).toArray();\n      if (controls.length) {\n        controls.forEach((item) => items.add(item.itemName, item));\n        items.add(section + \"Separator\", Separator.component());\n      }\n    });\n\n    return items;\n  },\n\n  /**\n   * Get controls for a warning pertaining to the current user (e.g. report).\n   *\n   * @param {Warning} warning\n   * @param {*} context The parent component under which the controls menu will\n   *     be displayed.\n   * @return {ItemList}\n   * @protected\n   */\n  userControls(warning, context) {\n    return new ItemList();\n  },\n\n  /**\n   * Get controls for a warning pertaining to moderation (e.g. edit).\n   *\n   * @param {Warning} warning\n   * @param {*} context The parent component under which the controls menu will\n   *     be displayed.\n   * @return {ItemList}\n   * @protected\n   */\n  moderationControls(warning, context) {\n    return new ItemList();\n  },\n\n  /**\n   * Get controls for a warning that are destructive (e.g. delete).\n   *\n   * @param {Warning} warning\n   * @param {*} context The parent component under which the controls menu will\n   *     be displayed.\n   * @return {ItemList}\n   * @protected\n   */\n  destructiveControls(warning, context) {\n    const items = new ItemList();\n    if (!warning.isHidden() && app.session.user.canManageWarnings()) {\n      items.add(\n        \"hide\",\n        <Button icon=\"far fa-trash-alt\" onclick={this.hideAction.bind(warning)}>\n          {app.translator.trans(\n            \"askvortsov-moderator-warnings.forum.warning_controls.delete_button\"\n          )}\n        </Button>\n      );\n    }\n    if (warning.isHidden() && app.session.user.canManageWarnings()) {\n      items.add(\n        \"restore\",\n        <Button icon=\"fas fa-reply\" onclick={this.restoreAction.bind(warning)}>\n          {app.translator.trans(\n            \"askvortsov-moderator-warnings.forum.warning_controls.restore_button\"\n          )}\n        </Button>\n      );\n    }\n    if (warning.isHidden() && app.session.user.canDeleteWarnings()) {\n      items.add(\n        \"delete\",\n        <Button icon=\"fas fa-times\" onclick={this.deleteAction.bind(warning)}>\n          {app.translator.trans(\n            \"askvortsov-moderator-warnings.forum.warning_controls.delete_forever_button\"\n          )}\n        </Button>\n      );\n    }\n\n    return items;\n  },\n\n  /**\n   * Hide a warning.\n   *\n   * @return {Promise}\n   */\n  hideAction() {\n    this.pushAttributes({ hiddenAt: new Date(), hiddenUser: app.session.user });\n\n    return this.save({ isHidden: true }).then(() => m.redraw());\n  },\n\n  /**\n   * Restore a warning.\n   *\n   * @return {Promise}\n   */\n  restoreAction() {\n    this.pushAttributes({ hiddenAt: null, hiddenUser: null });\n\n    return this.save({ isHidden: false }).then(() => m.redraw());\n  },\n\n  /**\n   * Delete a warning.\n   *\n   * @return {Promise}\n   */\n  deleteAction(context) {\n    if (context) context.loading = true;\n\n    return this.delete()\n      .then(() => {})\n      .catch(() => {})\n      .then(() => {\n        if (context) context.loading = false;\n        location.reload();\n      });\n  },\n};\n","import Component from \"flarum/Component\";\nimport Dropdown from \"flarum/components/Dropdown\";\nimport Link from \"flarum/components/Link\";\nimport avatar from \"flarum/helpers/avatar\";\nimport username from \"flarum/helpers/username\";\nimport humanTime from \"flarum/helpers/humanTime\";\nimport classList from \"flarum/utils/classList\";\nimport WarningPost from \"./WarningPost\";\nimport WarningControls from \"./WarningControls\";\n\nexport default class WarningListItem extends Component {\n  view() {\n    const { warning } = this.attrs;\n    const addedByUser = warning.addedByUser();\n    const controls = WarningControls.controls(warning, this).toArray();\n\n    return (\n      <div {...this.elementAttrs()}>\n        {controls.length\n          ? Dropdown.component(\n              {\n                icon: \"fas fa-ellipsis-v\",\n                className: \"WarningListItem-controls\",\n                buttonClassName:\n                  \"Button Button--icon Button--flat Slidable-underneath Slidable-underneath--right\",\n              },\n              controls\n            )\n          : \"\"}\n        <div className=\"WarningListItem-main\">\n          <h3 className=\"WarningListItem-title\">\n            <Link\n              href={addedByUser ? app.route.user(addedByUser) : \"#\"}\n              className=\"WarningListItem-author\"\n              oncreate={(vnode) => {\n                $(vnode.dom).tooltip({ placement: \"right\" });\n              }}\n            >\n              {avatar(addedByUser)} {username(addedByUser)}\n            </Link>\n          </h3>\n          <span class=\"WarningListItem-strikes\">\n            {warning.isHidden()\n              ? app.translator.transChoice(\n                  \"askvortsov-moderator-warnings.forum.warning_list_item.list_item_heading_hidden\",\n                  warning.strikes(),\n                  {\n                    time: humanTime(warning.createdAt()),\n                    strikes: warning.strikes() || \"0\",\n                  }\n                )\n              : app.translator.transChoice(\n                  \"askvortsov-moderator-warnings.forum.warning_list_item.list_item_heading\",\n                  warning.strikes(),\n                  {\n                    time: humanTime(warning.createdAt()),\n                    strikes: warning.strikes() || \"0\",\n                  }\n                )}\n          </span>\n          <hr />\n          <ul className=\"WarningListItem-info\">\n            {warning.post() ? (\n              <li className=\"item-excerpt\">\n                <h3 className=\"WarningListItem-subtitle\">\n                  {app.translator.trans(\n                    \"askvortsov-moderator-warnings.forum.warning_list_item.linked_post\"\n                  )}\n                </h3>\n                {WarningPost.component({ post: warning.post() })}\n              </li>\n            ) : (\n              \"\"\n            )}\n            <li className=\"item-excerpt\">\n              <h3 className=\"WarningListItem-subtitle\">\n                {app.translator.trans(\n                  \"askvortsov-moderator-warnings.forum.warning_list_item.public_comment\"\n                )}\n              </h3>\n              <p class=\"WarningListItem-comment\">\n                {m.trust(warning.public_comment())}\n              </p>\n            </li>\n            {app.session.user.canManageWarnings() &&\n            warning.private_comment() ? (\n              <li className=\"item-excerpt\">\n                <h3 className=\"WarningListItem-subtitle\">\n                  {app.translator.trans(\n                    \"askvortsov-moderator-warnings.forum.warning_list_item.private_comment\"\n                  )}\n                </h3>\n                <p class=\"WarningListItem-comment\">\n                  {m.trust(warning.private_comment())}\n                </p>\n              </li>\n            ) : (\n              \"\"\n            )}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n\n  elementAttrs() {\n    const { warning } = this.attrs;\n    const attrs = {};\n\n    attrs.className =\n      (attrs.className || \"\") +\n      \" \" +\n      classList({\n        WarningListItem: true,\n        \"WarningListItem--hidden\": warning.isHidden(),\n      });\n\n    return attrs;\n  }\n}\n","import Component from \"flarum/Component\";\nimport app from \"flarum/app\";\nimport LoadingIndicator from \"flarum/components/LoadingIndicator\";\nimport WarningListItem from \"./WarningListItem\";\nimport Button from \"flarum/components/Button\";\nimport WarningModal from \"./WarningModal\";\nimport listItems from \"flarum/helpers/listItems\";\nimport ItemList from \"flarum/utils/ItemList\";\n\nexport default class WarningList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.loading = true;\n    this.warnings = [];\n    this.user = this.attrs.params.user;\n    this.refresh();\n  }\n\n  view() {\n    let loading;\n\n    if (this.loading) {\n      loading = LoadingIndicator.component();\n    }\n\n    return (\n      <div className=\"WarningList\">\n        <h1 className=\"WarningList-warnings\">\n          {this.strikeCount()\n            ? app.translator.transChoice(\n                \"askvortsov-moderator-warnings.forum.warning_list.warnings\",\n                this.strikeCount(),\n                { strikes: this.strikeCount() || \"0\" }\n              )\n            : app.translator.trans(\n                \"askvortsov-moderator-warnings.forum.warning_list.warnings_no_strikes\"\n              )}\n        </h1>\n        <div class=\"Warnings-toolbar\">\n          <ul className=\"Warnings-toolbar-action\">\n            {listItems(this.actionItems().toArray())}\n          </ul>\n        </div>\n        <ul className=\"WarningList-Warnings\">\n          {this.warnings.map((warning) => {\n            return (\n              <li key={warning.id()} data-id={warning.id()}>\n                {WarningListItem.component({ warning })}\n              </li>\n            );\n          })}\n          {!this.loading && this.warnings.length === 0 && (\n            <label>\n              {app.translator.trans(\n                \"askvortsov-moderator-warnings.forum.warning_list.no_warnings\"\n              )}\n            </label>\n          )}\n        </ul>\n        <div className=\"WarningList-loadMore\">{loading}</div>\n      </div>\n    );\n  }\n\n  actionItems() {\n    const items = new ItemList();\n\n    if (app.session.user.canManageWarnings()) {\n      items.add(\n        \"create_warning\",\n        <Button\n          className=\"Button Button--primary\"\n          onclick={this.handleOnClickCreate.bind(this)}\n        >\n          {app.translator.trans(\n            \"askvortsov-moderator-warnings.forum.warning_list.add_button\"\n          )}\n        </Button>\n      );\n    }\n\n    return items;\n  }\n\n  strikeCount() {\n    return this.warnings\n      .filter((warning) => !warning.isHidden())\n      .map((warning) => warning.strikes())\n      .reduce((a, b) => a + b, 0);\n  }\n\n  parseResults(results) {\n    [].push.apply(this.warnings, results);\n    this.loading = false;\n    m.redraw();\n\n    return results;\n  }\n\n  refresh() {\n    return app.store\n      .find(\"warnings\", this.user.id())\n      .catch(() => {})\n      .then((results) => {\n        this.warnings = [];\n        this.parseResults(results);\n      });\n  }\n\n  handleOnClickCreate(e) {\n    e.preventDefault();\n    app.modal.show(WarningModal, {\n      callback: this.refresh.bind(this),\n      ...this.attrs.params,\n    });\n  }\n}\n","import UserPage from \"flarum/components/UserPage\";\nimport WarningList from \"./WarningList\";\n\nexport default class WarningPage extends UserPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.loadUser(m.route.param(\"username\"));\n  }\n\n  content() {\n    if (\n      app.session.user &&\n      (app.session.user.canViewWarnings() ||\n        (this.user.id() === app.session.user.id() &&\n          this.user.visibleWarningCount() > 0))\n    ) {\n      return (\n        <div className=\"WarningsUserPage\">\n          {WarningList.component({\n            params: {\n              user: this.user,\n              sort: \"newest\",\n            },\n          })}\n        </div>\n      );\n    }\n  }\n}\n","import { extend } from \"flarum/extend\";\nimport UserPage from \"flarum/components/UserPage\";\nimport LinkButton from \"flarum/components/LinkButton\";\nimport WarningPage from \"./components/WarningPage\";\n\nexport default function () {\n  app.routes[\"user.warnings\"] = {\n    path: \"/u/:username/warnings\",\n    component: WarningPage,\n  };\n\n  extend(UserPage.prototype, \"navItems\", function (items) {\n    if (\n      app.session.user &&\n      (app.session.user.canViewWarnings() ||\n        (this.user.id() === app.session.user.id() &&\n          this.user.visibleWarningCount() > 0))\n    ) {\n      items.add(\n        \"warnings\",\n        LinkButton.component(\n          {\n            href: app.route(\"user.warnings\", {\n              username: this.user.username(),\n            }),\n            icon: \"fas fa-exclamation-circle\",\n          },\n          [\n            app.translator.trans(\n              \"askvortsov-moderator-warnings.forum.user.warnings\"\n            ),\n            this.user.visibleWarningCount() > 0 ? (\n              <span className=\"Button-badge\">\n                {this.user.visibleWarningCount()}\n              </span>\n            ) : (\n              \"\"\n            ),\n          ]\n        ),\n        10\n      );\n    }\n  });\n}\n","import Component from \"flarum/Component\";\nimport Link from \"flarum/components/Link\";\nimport WarningListItem from \"./WarningListItem\";\n\nexport default class WarningPreview extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.warning = this.attrs.warning;\n  }\n\n  view() {\n    return (\n      <Link\n        className=\"WarningPreview\"\n        href={app.route(\"user.warnings\", {\n          username: this.warning.warnedUser().username(),\n        })}\n      >\n        <WarningListItem warning={this.warning}></WarningListItem>\n      </Link>\n    );\n  }\n}\n","import Component from \"flarum/Component\";\nimport icon from \"flarum/helpers/icon\";\nimport username from \"flarum/helpers/username\";\nimport WarningPreview from \"./WarningPreview\";\n\nexport default class PostWarning extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.warning = this.attrs.warning;\n  }\n\n  view() {\n    return (\n      <div className=\"Post-warning\">\n        <span className=\"Post-warning-summary\">\n          {icon(\"fas fa-exclamation-circle\")}\n          {this.warning.strikes()\n            ? app.translator.transChoice(\n                \"askvortsov-moderator-warnings.forum.post.warning\",\n                this.warning.strikes(),\n                {\n                  strikes: this.warning.strikes() || \"0\",\n                  mod_username: username(this.warning.addedByUser()),\n                }\n              )\n            : app.translator.trans(\n                \"askvortsov-moderator-warnings.forum.post.warning_no_strikes\",\n                {\n                  mod_username: username(this.warning.addedByUser()),\n                }\n              )}\n        </span>\n      </div>\n    );\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    const warning = this.warning;\n\n    let timeout;\n\n    const hidePreview = () => {\n      this.$(\".Post-warning-preview\")\n        .removeClass(\"in\")\n        .one(\"transitionend\", function () {\n          $(this).hide();\n        });\n    };\n\n    const $preview = $('<ul class=\"Dropdown-menu Post-warning-preview fade\"/>');\n    this.$().append($preview);\n\n    this.$()\n      .children()\n      .hover(\n        function () {\n          clearTimeout(timeout);\n          timeout = setTimeout(function () {\n            if (!$preview.hasClass(\"in\") && $preview.is(\":visible\")) return;\n\n            // When the user hovers their mouse over the list of people who have\n            // replied to the post, render a list of reply previews into a\n            // popup.\n            m.render(\n              $preview[0],\n              <li data-id={warning.id()}>\n                {WarningPreview.component({ warning })}\n              </li>\n            );\n            $preview.show();\n            setTimeout(() => $preview.off(\"transitionend\").addClass(\"in\"));\n          }, 200);\n        },\n        function () {\n          clearTimeout(timeout);\n          timeout = setTimeout(hidePreview, 250);\n        }\n      );\n\n    // Whenever the user hovers their mouse over a particular name in the\n    // list of repliers, highlight the corresponding post in the preview\n    // popup.\n    $(\".Post-warning\")\n      .find(\".Post-warning-summary a\")\n      .hover(\n        function () {\n          $(\".Post-warning\")\n            .find('[data-number=\"' + $(this).data(\"number\") + '\"]')\n            .addClass(\"active\");\n        },\n        function () {\n          $(\".Post-warning\").find(\"[data-number]\").removeClass(\"active\");\n        }\n      );\n  }\n}\n","import Component from \"flarum/Component\";\nimport PostWarning from \"./PostWarning\";\nimport WarningPreview from \"./WarningPreview\";\n\nexport default class PostWarningList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.post = this.attrs.post;\n  }\n\n  view() {\n    return (\n      <div className=\"Post-warning-list\">\n        {this.attrs.post.warnings().map((warning) => {\n          return PostWarning.component({ warning });\n        })}\n      </div>\n    );\n  }\n}\n","import Notification from \"flarum/components/Notification\";\nimport username from \"flarum/helpers/username\";\nimport { truncate } from \"flarum/utils/string\";\n\nexport default class WarningNotification extends Notification {\n  icon() {\n    return \"fas fa-exclamation-circle\";\n  }\n\n  href() {\n    return app.route(\"user.warnings\", {\n      username: app.session.user.username(),\n    });\n  }\n\n  content() {\n    const warning = this.attrs.notification.subject();\n\n    if (warning.strikes()) {\n      return app.translator.transChoice(\n        \"askvortsov-moderator-warnings.forum.notifications.warning_text\",\n        warning.strikes(),\n        {\n          mod_username: username(this.attrs.notification.fromUser()),\n          strikes: warning.strikes() || \"0\",\n        }\n      );\n    } else {\n      return app.translator.trans(\n        \"askvortsov-moderator-warnings.forum.notifications.warning_no_strikes_text\",\n        {\n          mod_username: username(this.attrs.notification.fromUser()),\n        }\n      );\n    }\n  }\n}\n","import Model from \"flarum/Model\";\nimport computed from \"flarum/utils/computed\";\n\nexport default class Warnings extends Model {}\nObject.assign(Warnings.prototype, {\n  id: Model.attribute(\"id\"),\n  public_comment: Model.attribute(\"public_comment\"),\n  private_comment: Model.attribute(\"private_comment\"),\n  strikes: Model.attribute(\"strikes\"),\n\n  createdAt: Model.attribute(\"createdAt\", Model.transformDate),\n  isHidden: computed(\"hiddenAt\", (hiddenAt) => !!hiddenAt),\n  hiddenAt: Model.attribute(\"hiddenAt\", Model.transformDate),\n\n  warnedUser: Model.hasOne(\"warnedUser\"),\n  hiddenByUser: Model.hasOne(\"hiddenByUser\"),\n  addedByUser: Model.hasOne(\"addedByUser\"),\n\n  post: Model.hasOne(\"post\"),\n});\n","import app from \"flarum/app\";\nimport NotificationGrid from \"flarum/components/NotificationGrid\";\nimport { Extend } from \"@flarum/core/forum\";\nimport { extend } from \"flarum/extend\";\nimport User from \"flarum/models/User\";\nimport Model from \"flarum/Model\";\nimport addWarningControl from \"./addWarningControl\";\nimport addWarningPage from \"./addWarningPage\";\nimport addWarningsToPosts from \"./addWarningsToPosts\";\nimport WarningNotification from \"./components/WarningNotification\";\nimport Warning from \"./model/Warning\";\n\napp.initializers.add(\"askvortsov/flarum-moderator-warnings\", (app) => {\n  app.store.models.warnings = Warning;\n  User.prototype.canViewWarnings = Model.attribute(\"canViewWarnings\");\n  User.prototype.canManageWarnings = Model.attribute(\"canManageWarnings\");\n  User.prototype.canDeleteWarnings = Model.attribute(\"canDeleteWarnings\");\n  User.prototype.visibleWarningCount = Model.attribute(\"visibleWarningCount\");\n  addWarningControl();\n  addWarningPage();\n  addWarningsToPosts();\n\n  app.notificationComponents.warning = WarningNotification;\n  extend(NotificationGrid.prototype, \"notificationTypes\", function (items) {\n    items.add(\"warning\", {\n      name: \"warning\",\n      icon: \"fas fa-exclamation-circle\",\n      label: app.translator.trans(\n        \"askvortsov-moderator-warnings.forum.settings.warning_notification_label\"\n      ),\n    });\n  });\n});\n","import { extend } from \"flarum/extend\";\nimport app from \"flarum/app\";\nimport PostControls from \"flarum/utils/PostControls\";\nimport UserControls from \"flarum/utils/UserControls\";\nimport Button from \"flarum/components/Button\";\n\nimport WarningModal from \"./components/WarningModal\";\n\nexport default function () {\n  extend(PostControls, \"moderationControls\", function (items, post) {\n    if (!app.session.user || !app.session.user.canManageWarnings()) return;\n\n    items.add(\n      \"warning\",\n      <Button\n        icon=\"fas fa-exclamation-circle\"\n        onclick={() =>\n          app.modal.show(WarningModal, {\n            callback: () => {\n              location.reload();\n            },\n            user: post.user(),\n            post: post,\n          })\n        }\n      >\n        {app.translator.trans(\n          \"askvortsov-moderator-warnings.forum.post_controls.warning_button\"\n        )}\n      </Button>\n    );\n  });\n\n  extend(UserControls, \"moderationControls\", function (items, user) {\n    if (!app.session.user || !app.session.user.canManageWarnings()) return;\n\n    items.add(\n      \"warning\",\n      <Button\n        icon=\"fas fa-exclamation-circle\"\n        onclick={() =>\n          app.modal.show(WarningModal, {\n            callback: () => {\n              location.reload();\n            },\n            user: user,\n          })\n        }\n      >\n        {app.translator.trans(\n          \"askvortsov-moderator-warnings.forum.post_controls.warning_button\"\n        )}\n      </Button>\n    );\n  });\n}\n","import { extend } from \"flarum/extend\";\nimport Model from \"flarum/Model\";\nimport Post from \"flarum/models/Post\";\nimport CommentPost from \"flarum/components/CommentPost\";\nimport PostWarningList from \"./components/PostWarningList\";\n\nexport default function addWarningsToPosts() {\n  Post.prototype.warnings = Model.hasMany(\"warnings\");\n\n  extend(CommentPost.prototype, \"footerItems\", function (items) {\n    const post = this.attrs.post;\n    const warnings = post.warnings();\n\n    if (!warnings) return;\n    items.add(\n      `warnings`,\n      PostWarningList.component({\n        post: post,\n      })\n    );\n  });\n}\n"],"sourceRoot":""}