module.exports=function(e){var t={};function n(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(a,s,function(t){return e[t]}.bind(null,s));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=34)}([function(e,t){e.exports=flarum.core.compat.extend},function(e,t){e.exports=flarum.core.compat["common/components/Button"]},function(e,t,n){"use strict";function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,a(e,t)}n.d(t,"a",(function(){return s}))},function(e,t){e.exports=flarum.core.compat["common/helpers/icon"]},function(e,t){e.exports=flarum.core.compat["admin/components/ExtensionPage"]},function(e,t){e.exports=flarum.core},function(e,t){e.exports=flarum.core.compat["common/helpers/listItems"]},function(e,t){e.exports=flarum.core.compat["common/components/Link"]},function(e,t){e.exports=flarum.core.compat["admin/components/ExtensionsWidget"]},function(e,t){e.exports=flarum.core.compat["admin/components/StatusWidget"]},function(e,t){e.exports=flarum.core.compat["admin/components/UserListPage"]},,function(e,t){e.exports=flarum.core.compat["common/utils/Stream"]},,,,function(e,t){e.exports=flarum.core.compat["common/components/Modal"]},function(e,t){e.exports=flarum.core.compat["common/utils/extractText"]},function(e,t){e.exports=flarum.core.compat["admin/utils/saveSettings"]},function(e,t){e.exports=flarum.core.compat["admin/components/HeaderSecondary"]},function(e,t){e.exports=flarum.core.compat["admin/components/AdminHeader"]},function(e,t){e.exports=flarum.core.compat["common/utils/classList"]},function(e,t){e.exports=flarum.core.compat["common/helpers/avatar"]},function(e,t){e.exports=flarum.core.compat["common/helpers/username"]},function(e,t){e.exports=flarum.core.compat["admin/components/AdminNav"]},function(e,t){e.exports=flarum.core.compat["common/components/SelectDropdown"]},function(e,t){e.exports=flarum.core.compat["common/components/LinkButton"]},function(e,t){e.exports=flarum.core.compat["admin/components/DashboardPage"]},function(e,t){e.exports=flarum.core.compat["common/components/Navigation"]},function(e,t){e.exports=flarum.core.compat["common/components/Dropdown"]},function(e,t){e.exports=flarum.core.compat["common/components/Switch"]},function(e,t){e.exports=flarum.core.compat["admin/components/AdminPage"]},function(e,t){e.exports=flarum.core.compat["admin/utils/getCategorizedExtensions"]},function(e,t){e.exports=flarum.core.compat["admin/utils/isExtensionEnabled"]},function(e,t,n){"use strict";n.r(t);var a=n(0);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var o=n(2),i=n(16),r=n.n(i),c=n(1),l=n.n(c),u=n(12),p=n.n(u),d=n(17),f=n.n(d),h=n(18),x=n.n(h),v=function(e){function t(){return e.apply(this,arguments)||this}Object(o.a)(t,e);var n=t.prototype;return n.oninit=function(t){e.prototype.oninit.call(this,t);var n=app.data.settings["afrux-theme-base.footer_links"],a=(n&&JSON.parse(n)||[]).filter((function(e){return null!==e})).map((function(e){return e.links&&(e.links=e.links.filter((function(e){return null!==e}))),e}));this.links=p()(a),this.loading=p()(!1)},n.title=function(){return app.translator.trans("afrux-theme-base.admin.settings.edit_footer_links")},n.className=function(){return"EditFooterLinksModal Modal--medium"},n.content=function(){var e=this;return m("div",{className:"EditFooterLinksModal-groups Modal-body"},this.links().map((function(t,n){return m("div",{className:"EditFooterLinksModal-groups-item"},m("div",{className:"EditFooterLinksModal-groups-item-title"},m("div",{className:"EditFooterLinksModal-groups-item-title-text",contenteditable:"true",oninput:function(a){e.saveGroup(s({},t,{title:a.target.innerHTML}),n)}},m.trust(t.title)),m("div",{className:"EditFooterLinksModal-groups-item-title-controls"},m(l.a,{className:"Button Button--icon",icon:"fas fa-times",onclick:function(){e.saveGroup(t,n,!0)}}))),m("div",{className:"EditFooterLinksModal-links"},t.links.map((function(t,a){return e.link(t,a,n)})),m(l.a,{className:"Button",icon:"fas fa-plus",onclick:function(){e.saveLink({url:"",label:""},n)}},app.translator.trans("afrux-theme-base.admin.settings.links_modal.add_link"))))})),m("div",null,m(l.a,{className:"Button Button--primary",loading:this.loading(),onclick:function(){x()({"afrux-theme-base.footer_links":JSON.stringify(e.links())}).then((function(){e.loading(!1),app.modal.close()})),e.loading(!0)}},app.translator.trans("core.lib.edit_user.submit_button")),m(l.a,{className:"Button",icon:"fas fa-plus-circle",onclick:function(){e.saveGroup({title:f()(app.translator.trans("afrux-theme-base.admin.settings.links_modal.group_name",{number:e.links().length+1})),links:[]})}},app.translator.trans("afrux-theme-base.admin.settings.links_modal.add_group"))))},n.link=function(e,t,n){var a=this,s=e.url,o=e.label;[].concat(this.links());return m("div",{className:"EditFooterLinksModal-links-item"},m("input",{oninput:function(e){a.saveLink({url:s,label:e.target.value},n,t)},value:o,className:"FormControl EditFooterLinksModal-links-item-label",placeholder:app.translator.trans("afrux-theme-base.admin.settings.links_modal.link_label"),"aria-labeledby":app.translator.trans("afrux-theme-base.admin.settings.links_modal.link_label")}),m("input",{oninput:function(e){a.saveLink({label:o,url:e.target.value},n,t)},value:s,className:"FormControl EditFooterLinksModal-links-item-url",placeholder:app.translator.trans("afrux-theme-base.admin.settings.links_modal.link_url"),"aria-labeledby":app.translator.trans("afrux-theme-base.admin.settings.links_modal.link_url")}),m(l.a,{className:"Button Button--icon",icon:"fas fa-times",onclick:function(){a.saveLink({},n,t,!0)}}))},n.saveLink=function(e,t,n,a){void 0===n&&(n=null),void 0===a&&(a=!1);var s=[].concat(this.links());a?delete s[t].links[n]:null!==n?s[t].links[n]=e:s[t].links.push(e),s[t].links=s[t].links.filter((function(e){return null!==e})),this.links(s)},n.saveGroup=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var a=[].concat(this.links());n?delete a[t]:null!==t?a[t]=e:a.push(e),a=a.filter((function(e){return null!==e})),this.links(a)},t}(r.a),b=n(9),g=n.n(b),N=n(8),k=n.n(N),y=n(19),B=n.n(y),E=n(20),_=n.n(E),T=n(4),P=n.n(T),O=n(10),L=n.n(O),j=n(21),S=n.n(j),A=n(3),w=n.n(A),C=n(6),H=n.n(C),I=n(22),M=n.n(I),U=n(23),F=n.n(U),z=n(24),D=n.n(z),W=n(25),G=n.n(W),q=n(26),J=n.n(q),V=n(27),K=n.n(V),Q=n(28),R=n.n(Q),X=n(29),Y=n.n(X),Z=n(30),ee=n.n(Z),te=function(e){function t(){return e.apply(this,arguments)||this}Object(o.a)(t,e);var n=t.prototype;return n.oninit=function(){app.current.data.extension=this.extension.extra["flarum-extension"].title},n.header=function(){var e=this.topItems();return e.get("version").attrs.className+=" TagLabel",m("div",{className:"ExtensionPage-header ThemeBase-AdminHeader"},m("div",{className:"ThemeBase-AdminHeader-container"},m("span",{className:"ThemeBase-AdminHeader-icon",style:this.extension.icon},this.extension.icon?w()(this.extension.icon.name):""),m("div",{className:"ThemeBase-AdminHeader-info"},m("h2",{className:"ThemeBase-AdminHeader-title"},this.extension.extra["flarum-extension"].title),m("div",{className:"ThemeBase-AdminHeader-description helpText"},this.extension.description)),m("div",{className:"ExtensionPage-headerTopItems"},m("ul",null,H()(e.toArray())))))},n.view=function(){var e=this;if(!this.extension)return null;var t=this.sections(),n=this.infoItems();return this.activeSection=this.activeSection||"content",t.items.permissions&&(t.items.permissions.content[0]=t.items.permissions.content[0].children[1].children),m("div",{className:"ExtensionPage ThemeBase-ExtensionPage "+this.className()},this.header(),m("div",{className:"ExtensionPage-body ThemeBase-ExtensionPage-body"},m("div",{className:"container"},m("div",{className:"ExtensionPage-headerItems ThemeBase-ExtensionPage-headerItems"},m(ee.a,{state:this.isEnabled(),onchange:this.toggle.bind(this,this.extension.id)},this.isEnabled(this.extension.id)?app.translator.trans("core.admin.extension.enabled"):app.translator.trans("core.admin.extension.disabled")),m("aside",{className:"ThemeBase-ExtensionPage-ExtensionInfo"},m("ul",null,H()(n.toArray())))),m("div",{className:"ExtensionPage-sections-nav ThemeBase-ExtensionPage-sections-nav"},Object.keys(t.items).map((function(t){var n="afrux-theme-base.admin.extension.sections."+t;return m(l.a,{className:["Button ExtensionPage-sections-nav-item ThemeBase-ExtensionPage-sections-nav-item",e.activeSection===t?"Button--active":""],onclick:function(){return e.activeSection=t}},app.translator.trans(n)===n?t:app.translator.trans(n))}))),m("div",{className:"ExtensionPage-sections ThemeBase-ExtensionPage-sections"},Object.keys(t.items).map((function(n){var a=t.items[n].content;return a.attrs&&a.attrs.className&&(a.attrs.className=a.attrs.className.replace("ExtensionPage","ThemeBase-ExtensionPage")),m("div",{className:["ExtensionPage-section ThemeBase-ExtensionPage-section",e.activeSection===n?"ExtensionPage-section--active ThemeBase-ExtensionPage-section--active":""].join(" ")},t.items[n].content)}))))))},n.content=function(e){return this.isEnabled()?e():m("div",{className:"ThemeBase-infobox"},app.translator.trans("core.admin.extension.enable_to_see"))},t}(P.a),ne=n(31),ae=n.n(ne),se=n(32),oe=n.n(se),ie=n(33),re=n.n(ie),me=n(7),ce=n.n(me),le=function(e){function t(){return e.apply(this,arguments)||this}Object(o.a)(t,e);var n=t.prototype;return n.oninit=function(t){e.prototype.oninit.call(this,t),this.extensions=app.categorizedExtensions||oe()()},n.headerInfo=function(){return{className:"ThemeBase-ExtensionsPage",icon:"fas fa-puzzle-piece",title:app.translator.trans("afrux-theme-base.admin.extensions.title"),description:app.translator.trans("afrux-theme-base.admin.extensions.description")}},n.content=function(){var e=this;return m("div",{className:"ThemeBase-ExtensionCategories"},m("div",{className:"ThemeBase-ExtensionCategories-container"},Object.keys(this.extensions).map((function(t){return m("div",{className:"ThemeBase-ExtensionCategory"},m("h3",{className:"ThemeBase-ExtensionCategory-title"},app.categoryLabels&&app.categoryLabels[t]||app.translator.trans("core.admin.nav.categories."+t)),m("div",{className:"ThemeBase-ExtensionCategory-container"},e.extensions[t].map((function(e){return m(ce.a,{href:app.route("extension",{id:e.id}),className:"ThemeBase-Extension"},m("div",{className:"ThemeBase-Extension-icon"},m("span",{className:"ExtensionListItem-icon ExtensionIcon",style:e.icon},e.icon?w()(e.icon.name):"")),m("div",{className:"ThemeBase-Extension-content"},m("div",{className:"ThemeBase-Extension-title"},m("div",{className:["ExtensionListItem-Dot","ThemeBase-Extension-state",re()(e.id)?"enabled":"disabled"].join(" ")}),m("div",{className:"ThemeBase-Extension-title-value"},e.extra["flarum-extension"].title)),m("div",{className:"ThemeBase-Extension-details"},m("div",{className:"ThemeBase-Extension-package"},e.name),m("div",{className:"ThemeBase-Extension-version"},e.version))))}))))}))))},t}(ae.a),ue=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(t=e.call.apply(e,[this].concat(a))||this).loading=!1,t}Object(o.a)(t,e);var n=t.prototype;return n.view=function(t){return this.attrs.loading=this.loading,this.attrs.className=(this.attrs.className||"")+" Button",app.data.settings[this.attrs.setting]?(this.attrs.onclick=this.remove.bind(this),m("div",{className:"UploadImageButton-container"},m("div",{className:"UploadImageButton-image-container"},m("img",{className:"UploadImageButton-image",src:app.forum.attribute(this.attrs.serializedName),alt:""})),e.prototype.view.call(this,s({},t,{children:app.translator.trans("core.admin.upload_image.remove_button")})))):(this.attrs.onclick=this.upload.bind(this),e.prototype.view.call(this,s({},t,{children:app.translator.trans("core.admin.upload_image.upload_button")})))},n.upload=function(){var e=this;this.loading||$('<input type="file">').appendTo("body").hide().click().on("change",(function(t){var n=new FormData;n.append(e.attrs.name,$(t.target)[0].files[0]),e.loading=!0,m.redraw(),app.request({method:"POST",url:e.resourceUrl(),serialize:function(e){return e},body:n}).then(e.success.bind(e),e.failure.bind(e))}))},n.remove=function(){this.loading=!0,m.redraw(),app.request({method:"DELETE",url:this.resourceUrl()}).then(this.success.bind(this),this.failure.bind(this))},n.resourceUrl=function(){return app.forum.attribute("apiUrl")+"/"+this.attrs.routeName},n.success=function(e){window.location.reload()},n.failure=function(e){this.loading=!1,m.redraw()},t}(l.a),pe={"extensions/afrux-theme-base/admin/components/EditFooterLinksModal":v,"extensions/afrux-theme-base/admin/components/ExtensionPage":te,"extensions/afrux-theme-base/admin/components/ExtensionsPage":le,"extensions/afrux-theme-base/admin/components/UploadImageButton":ue},de=n(5);app.initializers.add("afrux-theme-base",(function(){var e=app.data.resources[0].attributes["afrux-theme-base.footerHooked"],t=app.data.resources[0].attributes["afrux-theme-base.bannerHooked"],n=app.data.resources[0].attributes.currentThemeId,s=app.data.resources[0].attributes["afrux-theme-base.normalizeStatusWidgetStructure"],o=app.data.resources[0].attributes["afrux-theme-base.normalizeAdminHeaderStructure"],i=app.data.resources[0].attributes["afrux-theme-base.normalizeExtensionPageStructure"],r=app.data.resources[0].attributes["afrux-theme-base.normalizeUserTable"],c=app.data.resources[0].attributes["afrux-theme-base.addExtensionsPage"];t&&app.extensionData.for(n).registerSetting((function(){return m("div",{className:"Form-group HeroImageForm"},m("label",{for:"afrux-theme-base.hero_banner"},app.translator.trans("afrux-theme-base.admin.settings.hero_banner")),m(ue,{setting:"afrux-theme-base.hero_banner",serializedName:"afruxHeroBanner",routeName:"afrux_banner",name:"afrux_banner"}))})).registerSetting({setting:"afrux-theme-base.hero_banner_position",type:"text",label:app.translator.trans("afrux-theme-base.admin.settings.hero_banner_position")}),e&&app.extensionData.for(n).registerSetting((function(){return m("div",{className:"Form-group"},m("label",null,app.translator.trans("afrux-theme-base.admin.settings.footer_description")),m("textarea",{className:"FormControl",bidi:this.setting("afrux-theme-base.footer_description")},this.setting("afrux-theme-base.footer_description")()))})).registerSetting((function(){return m("div",{className:"Form-group"},m("label",null,app.translator.trans("afrux-theme-base.admin.settings.edit_footer_links")),m(l.a,{className:"Button",onclick:function(){return app.modal.show(v)}},app.translator.trans("afrux-theme-base.admin.settings.edit_footer_links")))})).registerSetting({setting:"afrux-theme-base.footer_bottom_line",type:"text",label:app.translator.trans("afrux-theme-base.admin.settings.footer_bottom_line")}),s&&(Object(a.override)(g.a.prototype,"className",(function(e){return e()+" ThemeBase-StatusWidget"})),Object(a.override)(g.a.prototype,"content",(function(e){var t=this.items();t.remove("tools");var n={"version-flarum":"fas fa-comment","version-php":"fab fa-php","version-mysql":"fas fa-database"};return app.data.illuminateVersion&&(n["version-laravel"]="fab fa-laravel",t.add("version-laravel",[m("strong",null,"Laravel"),m("br",null),app.data.illuminateVersion.replace("v","")])),Object.keys(t.items).map((function(e){var a=t.get(e);a[0].tag="div",a[0].attrs.className="ThemeBase-StatusWidget-key",a[2]=m("div",{className:"ThemeBase-StatusWidget-value"},a[2]),a[1]=m("div",{className:"ThemeBase-StatusWidget-content"},[a[0],a[2]]),a[0]=m("div",{className:"ThemeBase-StatusWidget-icon"},w()(n[e])),delete a[2]})),[m("ul",null,H()(t.toArray()))]}))),o&&(Object(a.override)(_.a.prototype,"view",(function(e,t){var n=this;switch(this.attrs.className){case"DashboardPage-header":this.handleClearCache=g.a.prototype.handleClearCache,this.controls=function(){return m(Y.a,{label:app.translator.trans("core.admin.dashboard.tools_button"),icon:"fas fa-cog",buttonClassName:"Button",menuClassName:"Dropdown-menu--right"},m(l.a,{onclick:n.handleClearCache.bind(n)},app.translator.trans("core.admin.dashboard.clear_cache_button")))};break;case"ThemeBase-ExtensionsPage-header":c&&k.a.prototype.controlItems&&(this.controls=function(){var e=k.a.prototype.controlItems().toArray()[0].children;return e[0].attrs.menuClassName+=" Dropdown-menu--right",e})}return m("div",{className:S()(["ThemeBase-AdminHeader",this.attrs.className])},m("div",{className:"container ThemeBase-AdminHeader-container"},m("div",{className:"ThemeBase-AdminHeader-icon"},w()(this.attrs.icon)),m("div",{className:"ThemeBase-AdminHeader-info"},m("h2",{className:"ThemeBase-AdminHeader-title"},t.children),m("div",{className:"ThemeBase-AdminHeader-description"},this.attrs.description)),m("div",{className:"ThemeBase-AdminHeader-controls"},this.controls&&this.controls())))})),Object(a.override)(P.a.prototype,"header",te.prototype.header)),i&&(Object(a.override)(P.a.prototype,"view",te.prototype.view),Object(a.override)(P.a.prototype,"content",te.prototype.content)),r&&(Object(a.extend)(L.a.prototype,"columns",(function(e){e.add("avatar",{name:w()("fas fa-user-circle"),content:function(e){return M()(e,{className:"UserListPage-grid-avatar"})}},95),e.remove("username"),e.add("username",{name:app.translator.trans("core.admin.users.grid.columns.username.title"),content:function(e){var t=F()(e),n=e.username();return console.log(t,n),n===t.text?n:[n," (",t,")"]}},90);var t=e.get("joinDate");t.name=[w()("fas fa-clock")," ",t.name];var n=e.get("emailAddress");n.name=[w()("far fa-envelope")," ",n.name],e.add("profileLink",{name:"",content:function(e){return m("a",{className:"Button Button--icon UserList-profileLinkBtn",href:app.forum.attribute("baseUrl")+"/u/"+e.slug()},w()("fas fa-link"))}})})),Object(a.extend)(L.a.prototype,"onupdate",(function(e){this.$(".UserList-emailIconBtn").removeClass("Button--text")})),Object(a.extend)(L.a.prototype,"content",(function(e){e[0]=m("div",{className:"UserListPage-stat-container"},m("div",{class:"UserListPage-totalUsers UserListPage-stat"},m("div",{className:"UserListPage-stat-value"},this.userCount),m("div",{className:"UserListPage-stat-key"},app.translator.trans("core.admin.users.total_users",{count:0})[0].replace(": ",""))))}))),c&&(app.routes.extensions={path:"/extensions",component:le},Object(a.override)(D.a.prototype,"view",(function(){var e=this.items();return e.remove("search"),e.remove("category-core"),e.add("extensions",m(J.a,{href:app.route("extensions"),icon:"fas fa-puzzle-piece",title:app.translator.trans("afrux-theme-base.admin.extensions.title"),active:["extension","extensions"].includes(app.current.data.routeName)},m("span",null,app.translator.trans("afrux-theme-base.admin.extensions.title")),app.current.data.extension?m("span",{className:"ThemeBase-extensions-nav-current"},app.current.data.extension):[])),m(G.a,{className:"AdminNav App-titleControl AdminNav-Main",buttonClassName:"Button"},e.toArray().concat())})),Object(a.extend)(K.a.prototype,"availableWidgets",(function(e){e.remove("extensions")})),Object(a.extend)(R.a.prototype,"getBackButton",(function(e){return e.attrs.className=e.attrs.className.replace("Button--icon",""),"extension"===app.current.data.routeName?(e.attrs.href=app.route("extensions"),delete e.attrs.onclick,e.children=app.translator.trans("afrux-theme-base.admin.extensions.title")):e.children=app.translator.trans("afrux-theme-base.admin.header.go_back"),e}))),Object(a.extend)(P.a.prototype,"oninit",te.prototype.oninit),Object(a.extend)(B.a.prototype,"items",(function(e){e.get("help").attrs.className="Button Button--link"}))})),Object.assign(de.compat,pe)}]);
//# sourceMappingURL=admin.js.map