{"version":3,"sources":["webpack://@datlechin/flarum-keyboard-shortcuts/webpack/bootstrap","webpack://@datlechin/flarum-keyboard-shortcuts/external \"flarum.core.compat['forum/app']\"","webpack://@datlechin/flarum-keyboard-shortcuts/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@datlechin/flarum-keyboard-shortcuts/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@datlechin/flarum-keyboard-shortcuts/external \"flarum.core.compat['common/extend']\"","webpack://@datlechin/flarum-keyboard-shortcuts/external \"flarum.core.compat['common/components/Page']\"","webpack://@datlechin/flarum-keyboard-shortcuts/external \"flarum.core.compat['forum/components/DiscussionPage']\"","webpack://@datlechin/flarum-keyboard-shortcuts/external \"flarum.core.compat['forum/components/DiscussionList']\"","webpack://@datlechin/flarum-keyboard-shortcuts/external \"flarum.core.compat['common/components/Modal']\"","webpack://@datlechin/flarum-keyboard-shortcuts/./node_modules/hotkeys-js/dist/hotkeys.esm.js","webpack://@datlechin/flarum-keyboard-shortcuts/./src/forum/helpers/getSetting.js","webpack://@datlechin/flarum-keyboard-shortcuts/./src/forum/components/KeyboardShortcutsModal.js","webpack://@datlechin/flarum-keyboard-shortcuts/./src/forum/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","flarum","core","compat","_setPrototypeOf","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","constructor","isff","navigator","userAgent","toLowerCase","indexOf","addEvent","event","method","addEventListener","attachEvent","concat","window","getMods","modifier","mods","slice","length","getKeys","keys","replace","split","index","lastIndexOf","splice","_keyMap","backspace","tab","clear","enter","return","esc","escape","space","left","up","right","down","del","delete","ins","insert","home","end","pageup","pagedown","capslock","num_0","num_1","num_2","num_3","num_4","num_5","num_6","num_7","num_8","num_9","num_multiply","num_add","num_enter","num_subtract","num_decimal","num_divide","'","_modifier","shift","alt","option","ctrl","control","cmd","command","modifierMap","16","18","17","91","shiftKey","ctrlKey","altKey","metaKey","_mods","_handlers","k","_downKeys","_scope","elementHasBindEvent","code","x","toUpperCase","charCodeAt","setScope","scope","getScope","eachUnbind","_ref","_ref$splitKey","splitKey","forEach","originKey","unbindKeys","len","lastKey","keyCode","map","record","a1","a2","arr1","arr2","isIndex","compareArray","eventHandler","handler","modifiersMatch","y","shortcut","preventDefault","returnValue","stopPropagation","cancelBubble","dispatch","asterisk","which","charCode","hotkeys","filter","this","push","keyName","keyNum","e","getModifierState","type","keydown","keyup","_i","keyShortcut","_downKeysCurrent","a","sort","join","element","document","undefined","toString","isElementBind","clearModifier","_api","deleteScope","newScope","handlers","getPressedKeyCodes","isPressed","target","srcElement","tagName","flag","isContentEditable","readOnly","unbind","keysInfo","Array","isArray","info","_len","arguments","args","_key","_hotkeys","noConflict","deep","setting","app","forum","attribute","packagePrefix","KeyboardShortcutsModal","oninit","vnode","className","title","translator","trans","content","groupName","shortcutName","class","getSetting","Modal","initializers","add","extend","Page","modal","show","$","focus","click","DiscussionPage","history","back","pane","togglePinned","hide","current","data","stream","goToFirst","goToLast","DiscussionList"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n","module.exports = flarum.core.compat['forum/app'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/components/Page'];","module.exports = flarum.core.compat['forum/components/DiscussionPage'];","module.exports = flarum.core.compat['forum/components/DiscussionList'];","module.exports = flarum.core.compat['common/components/Modal'];","/*!\n * hotkeys-js v3.8.7\n * A simple micro-library for defining and dispatching keyboard shortcuts. It has no dependencies.\n * \n * Copyright (c) 2021 kenny wong <wowohoo@qq.com>\n * http://jaywcjlove.github.io/hotkeys\n * \n * Licensed under the MIT license.\n */\n\nvar isff = typeof navigator !== 'undefined' ? navigator.userAgent.toLowerCase().indexOf('firefox') > 0 : false; // 绑定事件\n\nfunction addEvent(object, event, method) {\n  if (object.addEventListener) {\n    object.addEventListener(event, method, false);\n  } else if (object.attachEvent) {\n    object.attachEvent(\"on\".concat(event), function () {\n      method(window.event);\n    });\n  }\n} // 修饰键转换成对应的键码\n\n\nfunction getMods(modifier, key) {\n  var mods = key.slice(0, key.length - 1);\n\n  for (var i = 0; i < mods.length; i++) {\n    mods[i] = modifier[mods[i].toLowerCase()];\n  }\n\n  return mods;\n} // 处理传的key字符串转换成数组\n\n\nfunction getKeys(key) {\n  if (typeof key !== 'string') key = '';\n  key = key.replace(/\\s/g, ''); // 匹配任何空白字符,包括空格、制表符、换页符等等\n\n  var keys = key.split(','); // 同时设置多个快捷键，以','分割\n\n  var index = keys.lastIndexOf(''); // 快捷键可能包含','，需特殊处理\n\n  for (; index >= 0;) {\n    keys[index - 1] += ',';\n    keys.splice(index, 1);\n    index = keys.lastIndexOf('');\n  }\n\n  return keys;\n} // 比较修饰键的数组\n\n\nfunction compareArray(a1, a2) {\n  var arr1 = a1.length >= a2.length ? a1 : a2;\n  var arr2 = a1.length >= a2.length ? a2 : a1;\n  var isIndex = true;\n\n  for (var i = 0; i < arr1.length; i++) {\n    if (arr2.indexOf(arr1[i]) === -1) isIndex = false;\n  }\n\n  return isIndex;\n}\n\nvar _keyMap = {\n  backspace: 8,\n  tab: 9,\n  clear: 12,\n  enter: 13,\n  return: 13,\n  esc: 27,\n  escape: 27,\n  space: 32,\n  left: 37,\n  up: 38,\n  right: 39,\n  down: 40,\n  del: 46,\n  delete: 46,\n  ins: 45,\n  insert: 45,\n  home: 36,\n  end: 35,\n  pageup: 33,\n  pagedown: 34,\n  capslock: 20,\n  num_0: 96,\n  num_1: 97,\n  num_2: 98,\n  num_3: 99,\n  num_4: 100,\n  num_5: 101,\n  num_6: 102,\n  num_7: 103,\n  num_8: 104,\n  num_9: 105,\n  num_multiply: 106,\n  num_add: 107,\n  num_enter: 108,\n  num_subtract: 109,\n  num_decimal: 110,\n  num_divide: 111,\n  '⇪': 20,\n  ',': 188,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '-': isff ? 173 : 189,\n  '=': isff ? 61 : 187,\n  ';': isff ? 59 : 186,\n  '\\'': 222,\n  '[': 219,\n  ']': 221,\n  '\\\\': 220\n}; // Modifier Keys\n\nvar _modifier = {\n  // shiftKey\n  '⇧': 16,\n  shift: 16,\n  // altKey\n  '⌥': 18,\n  alt: 18,\n  option: 18,\n  // ctrlKey\n  '⌃': 17,\n  ctrl: 17,\n  control: 17,\n  // metaKey\n  '⌘': 91,\n  cmd: 91,\n  command: 91\n};\nvar modifierMap = {\n  16: 'shiftKey',\n  18: 'altKey',\n  17: 'ctrlKey',\n  91: 'metaKey',\n  shiftKey: 16,\n  ctrlKey: 17,\n  altKey: 18,\n  metaKey: 91\n};\nvar _mods = {\n  16: false,\n  18: false,\n  17: false,\n  91: false\n};\nvar _handlers = {}; // F1~F12 special key\n\nfor (var k = 1; k < 20; k++) {\n  _keyMap[\"f\".concat(k)] = 111 + k;\n}\n\nvar _downKeys = []; // 记录摁下的绑定键\n\nvar _scope = 'all'; // 默认热键范围\n\nvar elementHasBindEvent = []; // 已绑定事件的节点记录\n// 返回键码\n\nvar code = function code(x) {\n  return _keyMap[x.toLowerCase()] || _modifier[x.toLowerCase()] || x.toUpperCase().charCodeAt(0);\n}; // 设置获取当前范围（默认为'所有'）\n\n\nfunction setScope(scope) {\n  _scope = scope || 'all';\n} // 获取当前范围\n\n\nfunction getScope() {\n  return _scope || 'all';\n} // 获取摁下绑定键的键值\n\n\nfunction getPressedKeyCodes() {\n  return _downKeys.slice(0);\n} // 表单控件控件判断 返回 Boolean\n// hotkey is effective only when filter return true\n\n\nfunction filter(event) {\n  var target = event.target || event.srcElement;\n  var tagName = target.tagName;\n  var flag = true; // ignore: isContentEditable === 'true', <input> and <textarea> when readOnly state is false, <select>\n\n  if (target.isContentEditable || (tagName === 'INPUT' || tagName === 'TEXTAREA' || tagName === 'SELECT') && !target.readOnly) {\n    flag = false;\n  }\n\n  return flag;\n} // 判断摁下的键是否为某个键，返回true或者false\n\n\nfunction isPressed(keyCode) {\n  if (typeof keyCode === 'string') {\n    keyCode = code(keyCode); // 转换成键码\n  }\n\n  return _downKeys.indexOf(keyCode) !== -1;\n} // 循环删除handlers中的所有 scope(范围)\n\n\nfunction deleteScope(scope, newScope) {\n  var handlers;\n  var i; // 没有指定scope，获取scope\n\n  if (!scope) scope = getScope();\n\n  for (var key in _handlers) {\n    if (Object.prototype.hasOwnProperty.call(_handlers, key)) {\n      handlers = _handlers[key];\n\n      for (i = 0; i < handlers.length;) {\n        if (handlers[i].scope === scope) handlers.splice(i, 1);else i++;\n      }\n    }\n  } // 如果scope被删除，将scope重置为all\n\n\n  if (getScope() === scope) setScope(newScope || 'all');\n} // 清除修饰键\n\n\nfunction clearModifier(event) {\n  var key = event.keyCode || event.which || event.charCode;\n\n  var i = _downKeys.indexOf(key); // 从列表中清除按压过的键\n\n\n  if (i >= 0) {\n    _downKeys.splice(i, 1);\n  } // 特殊处理 cmmand 键，在 cmmand 组合快捷键 keyup 只执行一次的问题\n\n\n  if (event.key && event.key.toLowerCase() === 'meta') {\n    _downKeys.splice(0, _downKeys.length);\n  } // 修饰键 shiftKey altKey ctrlKey (command||metaKey) 清除\n\n\n  if (key === 93 || key === 224) key = 91;\n\n  if (key in _mods) {\n    _mods[key] = false; // 将修饰键重置为false\n\n    for (var k in _modifier) {\n      if (_modifier[k] === key) hotkeys[k] = false;\n    }\n  }\n}\n\nfunction unbind(keysInfo) {\n  // unbind(), unbind all keys\n  if (!keysInfo) {\n    Object.keys(_handlers).forEach(function (key) {\n      return delete _handlers[key];\n    });\n  } else if (Array.isArray(keysInfo)) {\n    // support like : unbind([{key: 'ctrl+a', scope: 's1'}, {key: 'ctrl-a', scope: 's2', splitKey: '-'}])\n    keysInfo.forEach(function (info) {\n      if (info.key) eachUnbind(info);\n    });\n  } else if (typeof keysInfo === 'object') {\n    // support like unbind({key: 'ctrl+a, ctrl+b', scope:'abc'})\n    if (keysInfo.key) eachUnbind(keysInfo);\n  } else if (typeof keysInfo === 'string') {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    // support old method\n    // eslint-disable-line\n    var scope = args[0],\n        method = args[1];\n\n    if (typeof scope === 'function') {\n      method = scope;\n      scope = '';\n    }\n\n    eachUnbind({\n      key: keysInfo,\n      scope: scope,\n      method: method,\n      splitKey: '+'\n    });\n  }\n} // 解除绑定某个范围的快捷键\n\n\nvar eachUnbind = function eachUnbind(_ref) {\n  var key = _ref.key,\n      scope = _ref.scope,\n      method = _ref.method,\n      _ref$splitKey = _ref.splitKey,\n      splitKey = _ref$splitKey === void 0 ? '+' : _ref$splitKey;\n  var multipleKeys = getKeys(key);\n  multipleKeys.forEach(function (originKey) {\n    var unbindKeys = originKey.split(splitKey);\n    var len = unbindKeys.length;\n    var lastKey = unbindKeys[len - 1];\n    var keyCode = lastKey === '*' ? '*' : code(lastKey);\n    if (!_handlers[keyCode]) return; // 判断是否传入范围，没有就获取范围\n\n    if (!scope) scope = getScope();\n    var mods = len > 1 ? getMods(_modifier, unbindKeys) : [];\n    _handlers[keyCode] = _handlers[keyCode].map(function (record) {\n      // 通过函数判断，是否解除绑定，函数相等直接返回\n      var isMatchingMethod = method ? record.method === method : true;\n\n      if (isMatchingMethod && record.scope === scope && compareArray(record.mods, mods)) {\n        return {};\n      }\n\n      return record;\n    });\n  });\n}; // 对监听对应快捷键的回调函数进行处理\n\n\nfunction eventHandler(event, handler, scope) {\n  var modifiersMatch; // 看它是否在当前范围\n\n  if (handler.scope === scope || handler.scope === 'all') {\n    // 检查是否匹配修饰符（如果有返回true）\n    modifiersMatch = handler.mods.length > 0;\n\n    for (var y in _mods) {\n      if (Object.prototype.hasOwnProperty.call(_mods, y)) {\n        if (!_mods[y] && handler.mods.indexOf(+y) > -1 || _mods[y] && handler.mods.indexOf(+y) === -1) {\n          modifiersMatch = false;\n        }\n      }\n    } // 调用处理程序，如果是修饰键不做处理\n\n\n    if (handler.mods.length === 0 && !_mods[16] && !_mods[18] && !_mods[17] && !_mods[91] || modifiersMatch || handler.shortcut === '*') {\n      if (handler.method(event, handler) === false) {\n        if (event.preventDefault) event.preventDefault();else event.returnValue = false;\n        if (event.stopPropagation) event.stopPropagation();\n        if (event.cancelBubble) event.cancelBubble = true;\n      }\n    }\n  }\n} // 处理keydown事件\n\n\nfunction dispatch(event) {\n  var asterisk = _handlers['*'];\n  var key = event.keyCode || event.which || event.charCode; // 表单控件过滤 默认表单控件不触发快捷键\n\n  if (!hotkeys.filter.call(this, event)) return; // Gecko(Firefox)的command键值224，在Webkit(Chrome)中保持一致\n  // Webkit左右 command 键值不一样\n\n  if (key === 93 || key === 224) key = 91;\n  /**\n   * Collect bound keys\n   * If an Input Method Editor is processing key input and the event is keydown, return 229.\n   * https://stackoverflow.com/questions/25043934/is-it-ok-to-ignore-keydown-events-with-keycode-229\n   * http://lists.w3.org/Archives/Public/www-dom/2010JulSep/att-0182/keyCode-spec.html\n   */\n\n  if (_downKeys.indexOf(key) === -1 && key !== 229) _downKeys.push(key);\n  /**\n   * Jest test cases are required.\n   * ===============================\n   */\n\n  ['ctrlKey', 'altKey', 'shiftKey', 'metaKey'].forEach(function (keyName) {\n    var keyNum = modifierMap[keyName];\n\n    if (event[keyName] && _downKeys.indexOf(keyNum) === -1) {\n      _downKeys.push(keyNum);\n    } else if (!event[keyName] && _downKeys.indexOf(keyNum) > -1) {\n      _downKeys.splice(_downKeys.indexOf(keyNum), 1);\n    } else if (keyName === 'metaKey' && event[keyName] && _downKeys.length === 3) {\n      /**\n       * Fix if Command is pressed:\n       * ===============================\n       */\n      if (!(event.ctrlKey || event.shiftKey || event.altKey)) {\n        _downKeys = _downKeys.slice(_downKeys.indexOf(keyNum));\n      }\n    }\n  });\n  /**\n   * -------------------------------\n   */\n\n  if (key in _mods) {\n    _mods[key] = true; // 将特殊字符的key注册到 hotkeys 上\n\n    for (var k in _modifier) {\n      if (_modifier[k] === key) hotkeys[k] = true;\n    }\n\n    if (!asterisk) return;\n  } // 将 modifierMap 里面的修饰键绑定到 event 中\n\n\n  for (var e in _mods) {\n    if (Object.prototype.hasOwnProperty.call(_mods, e)) {\n      _mods[e] = event[modifierMap[e]];\n    }\n  }\n  /**\n   * https://github.com/jaywcjlove/hotkeys/pull/129\n   * This solves the issue in Firefox on Windows where hotkeys corresponding to special characters would not trigger.\n   * An example of this is ctrl+alt+m on a Swedish keyboard which is used to type μ.\n   * Browser support: https://caniuse.com/#feat=keyboardevent-getmodifierstate\n   */\n\n\n  if (event.getModifierState && !(event.altKey && !event.ctrlKey) && event.getModifierState('AltGraph')) {\n    if (_downKeys.indexOf(17) === -1) {\n      _downKeys.push(17);\n    }\n\n    if (_downKeys.indexOf(18) === -1) {\n      _downKeys.push(18);\n    }\n\n    _mods[17] = true;\n    _mods[18] = true;\n  } // 获取范围 默认为 `all`\n\n\n  var scope = getScope(); // 对任何快捷键都需要做的处理\n\n  if (asterisk) {\n    for (var i = 0; i < asterisk.length; i++) {\n      if (asterisk[i].scope === scope && (event.type === 'keydown' && asterisk[i].keydown || event.type === 'keyup' && asterisk[i].keyup)) {\n        eventHandler(event, asterisk[i], scope);\n      }\n    }\n  } // key 不在 _handlers 中返回\n\n\n  if (!(key in _handlers)) return;\n\n  for (var _i = 0; _i < _handlers[key].length; _i++) {\n    if (event.type === 'keydown' && _handlers[key][_i].keydown || event.type === 'keyup' && _handlers[key][_i].keyup) {\n      if (_handlers[key][_i].key) {\n        var record = _handlers[key][_i];\n        var splitKey = record.splitKey;\n        var keyShortcut = record.key.split(splitKey);\n        var _downKeysCurrent = []; // 记录当前按键键值\n\n        for (var a = 0; a < keyShortcut.length; a++) {\n          _downKeysCurrent.push(code(keyShortcut[a]));\n        }\n\n        if (_downKeysCurrent.sort().join('') === _downKeys.sort().join('')) {\n          // 找到处理内容\n          eventHandler(event, record, scope);\n        }\n      }\n    }\n  }\n} // 判断 element 是否已经绑定事件\n\n\nfunction isElementBind(element) {\n  return elementHasBindEvent.indexOf(element) > -1;\n}\n\nfunction hotkeys(key, option, method) {\n  _downKeys = [];\n  var keys = getKeys(key); // 需要处理的快捷键列表\n\n  var mods = [];\n  var scope = 'all'; // scope默认为all，所有范围都有效\n\n  var element = document; // 快捷键事件绑定节点\n\n  var i = 0;\n  var keyup = false;\n  var keydown = true;\n  var splitKey = '+'; // 对为设定范围的判断\n\n  if (method === undefined && typeof option === 'function') {\n    method = option;\n  }\n\n  if (Object.prototype.toString.call(option) === '[object Object]') {\n    if (option.scope) scope = option.scope; // eslint-disable-line\n\n    if (option.element) element = option.element; // eslint-disable-line\n\n    if (option.keyup) keyup = option.keyup; // eslint-disable-line\n\n    if (option.keydown !== undefined) keydown = option.keydown; // eslint-disable-line\n\n    if (typeof option.splitKey === 'string') splitKey = option.splitKey; // eslint-disable-line\n  }\n\n  if (typeof option === 'string') scope = option; // 对于每个快捷键进行处理\n\n  for (; i < keys.length; i++) {\n    key = keys[i].split(splitKey); // 按键列表\n\n    mods = []; // 如果是组合快捷键取得组合快捷键\n\n    if (key.length > 1) mods = getMods(_modifier, key); // 将非修饰键转化为键码\n\n    key = key[key.length - 1];\n    key = key === '*' ? '*' : code(key); // *表示匹配所有快捷键\n    // 判断key是否在_handlers中，不在就赋一个空数组\n\n    if (!(key in _handlers)) _handlers[key] = [];\n\n    _handlers[key].push({\n      keyup: keyup,\n      keydown: keydown,\n      scope: scope,\n      mods: mods,\n      shortcut: keys[i],\n      method: method,\n      key: keys[i],\n      splitKey: splitKey\n    });\n  } // 在全局document上设置快捷键\n\n\n  if (typeof element !== 'undefined' && !isElementBind(element) && window) {\n    elementHasBindEvent.push(element);\n    addEvent(element, 'keydown', function (e) {\n      dispatch(e);\n    });\n    addEvent(window, 'focus', function () {\n      _downKeys = [];\n    });\n    addEvent(element, 'keyup', function (e) {\n      dispatch(e);\n      clearModifier(e);\n    });\n  }\n}\n\nvar _api = {\n  setScope: setScope,\n  getScope: getScope,\n  deleteScope: deleteScope,\n  getPressedKeyCodes: getPressedKeyCodes,\n  isPressed: isPressed,\n  filter: filter,\n  unbind: unbind\n};\n\nfor (var a in _api) {\n  if (Object.prototype.hasOwnProperty.call(_api, a)) {\n    hotkeys[a] = _api[a];\n  }\n}\n\nif (typeof window !== 'undefined') {\n  var _hotkeys = window.hotkeys;\n\n  hotkeys.noConflict = function (deep) {\n    if (deep && window.hotkeys === hotkeys) {\n      window.hotkeys = _hotkeys;\n    }\n\n    return hotkeys;\n  };\n\n  window.hotkeys = hotkeys;\n}\n\nexport default hotkeys;\n","export default function setting(key) {\n  const packagePrefix = 'datlechin-keyboard-shortcuts.';\n  const value = app.forum.attribute(packagePrefix + key);\n\n  return value;\n}\n","import Modal from 'flarum/common/components/Modal';\nimport getSetting from '../helpers/getSetting';\n\nconst packagePrefix = 'datlechin-keyboard-shortcuts.';\n\nexport default class KeyboardShortcutsModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n  }\n\n  className() {\n    return 'KeyboardShortcutsModal Modal--large';\n  }\n\n  title() {\n    return app.translator.trans(packagePrefix + 'forum.modal.title');\n  }\n\n  content() {\n    const groupName = (key) => app.translator.trans(packagePrefix + 'lib.' + key);\n    const shortcutName = (key) => app.translator.trans(packagePrefix + 'lib.shortcuts.' + key);\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"KeyboardShortcuts-wrap\">\n          <ul className=\"KeyboardShortcuts-list\">\n            <label className=\"KeyboardShortcuts-heading\">{groupName('global_heading')}</label>\n            <li class=\"KeyboardShortcuts-unit\">\n              <kbd class=\"helpKey\">\n                <span>{getSetting('help')}</span>\n              </kbd>\n              <span class=\"helpKey-desc\">{shortcutName('help')}</span>\n            </li>\n            <li class=\"KeyboardShortcuts-unit\">\n              <kbd class=\"helpKey\">\n                <span>{getSetting('search')}</span>\n              </kbd>\n              <span class=\"helpKey-desc\">{shortcutName('search')}</span>\n            </li>\n            <li class=\"KeyboardShortcuts-unit\">\n              <kbd class=\"helpKey\">\n                <span>{getSetting('newDiscussion')}</span>\n              </kbd>\n              <span class=\"helpKey-desc\">{shortcutName('new_discussion')}</span>\n            </li>\n            <li class=\"KeyboardShortcuts-unit\">\n              <kbd class=\"helpKey\">\n                <span>{getSetting('notifications')}</span>\n              </kbd>\n              <span class=\"helpKey-desc\">{shortcutName('notifications')}</span>\n            </li>\n            <li class=\"KeyboardShortcuts-unit\">\n              <kbd class=\"helpKey\">\n                <span>{getSetting('flags')}</span>\n              </kbd>\n              <span class=\"helpKey-desc\">{shortcutName('flags')}</span>\n            </li>\n            <li class=\"KeyboardShortcuts-unit\">\n              <kbd class=\"helpKey\">\n                <span>{getSetting('session')}</span>\n              </kbd>\n              <span class=\"helpKey-desc\">{shortcutName('session')}</span>\n            </li>\n            <li class=\"KeyboardShortcuts-unit\">\n              <kbd class=\"helpKey\">\n                <span>{getSetting('login')}</span>\n              </kbd>\n              <span class=\"helpKey-desc\">{shortcutName('login')}</span>\n            </li>\n            <li class=\"KeyboardShortcuts-unit\">\n              <kbd class=\"helpKey\">\n                <span>{getSetting('signup')}</span>\n              </kbd>\n              <span class=\"helpKey-desc\">{shortcutName('signup')}</span>\n            </li>\n          </ul>\n          <ul className=\"KeyboardShortcuts-list\">\n            <label className=\"KeyboardShortcuts-heading\">{groupName('discussion_page_heading')}</label>\n            <li class=\"KeyboardShortcuts-unit\">\n              <kbd class=\"helpKey\">\n                <span>{getSetting('back')}</span>\n              </kbd>\n              <span class=\"helpKey-desc\">{shortcutName('back')}</span>\n            </li>\n            <li class=\"KeyboardShortcuts-unit\">\n              <kbd class=\"helpKey\">\n                <span>{getSetting('pinNav')}</span>\n              </kbd>\n              <span class=\"helpKey-desc\">{shortcutName('pin_nav')}</span>\n            </li>\n            <li class=\"KeyboardShortcuts-unit\">\n              <kbd class=\"helpKey\">\n                <span>{getSetting('reply')}</span>\n              </kbd>\n              <span class=\"helpKey-desc\">{shortcutName('reply')}</span>\n            </li>\n            <li class=\"KeyboardShortcuts-unit\">\n              <kbd class=\"helpKey\">\n                <span>{getSetting('follow')}</span>\n              </kbd>\n              <span class=\"helpKey-desc\">{shortcutName('follow')}</span>\n            </li>\n            <li class=\"KeyboardShortcuts-unit\">\n              <kbd class=\"helpKey\">\n                <span>{getSetting('firstPost')}</span>\n              </kbd>\n              <span class=\"helpKey-desc\">{shortcutName('first_post')}</span>\n            </li>\n            <li class=\"KeyboardShortcuts-unit\">\n              <kbd class=\"helpKey\">\n                <span>{getSetting('lastPost')}</span>\n              </kbd>\n              <span class=\"helpKey-desc\">{shortcutName('last_post')}</span>\n            </li>\n          </ul>\n          <ul className=\"KeyboardShortcuts-list\">\n            <label className=\"KeyboardShortcuts-heading\">{groupName('discussion_list_heading')}</label>\n            <li class=\"KeyboardShortcuts-unit\">\n              <kbd class=\"helpKey\">\n                <span>{getSetting('markAllAsRead')}</span>\n              </kbd>\n              <span class=\"helpKey-desc\">{shortcutName('mark_all_as_read')}</span>\n            </li>\n            <li class=\"KeyboardShortcuts-unit\">\n              <kbd class=\"helpKey\">\n                <span>{getSetting('refresh')}</span>\n              </kbd>\n              <span class=\"helpKey-desc\">{shortcutName('refresh')}</span>\n            </li>\n          </ul>\n        </div>\n      </div>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport Page from 'flarum/common/components/Page';\nimport DiscussionPage from 'flarum/forum/components/DiscussionPage';\nimport DiscussionList from 'flarum/forum/components/DiscussionList';\nimport hotkeys from 'hotkeys-js';\nimport KeyboardShortcutsModal from './components/KeyboardShortcutsModal';\nimport getSetting from './helpers/getSetting';\n\napp.initializers.add('datlechin/flarum-keyboard-shortcuts', () => {\n  extend(Page.prototype, 'oninit', function () {\n    hotkeys(getSetting('help'), () => {\n      app.modal.show(KeyboardShortcutsModal);\n    });\n\n    hotkeys(getSetting('search'), () => {\n      $('.Search-input input').focus();\n    });\n\n    hotkeys(getSetting('newDiscussion'), () => {\n      $('.item-newDiscussion button').click();\n    });\n\n    hotkeys(getSetting('notifications'), () => {\n      $('.item-notifications button').click();\n    });\n\n    hotkeys(getSetting('flags'), () => {\n      $('.item-flags button').click();\n    });\n\n    hotkeys(getSetting('session'), () => {\n      $('.item-session .Button--user').click();\n    });\n\n    hotkeys(getSetting('signup'), () => {\n      $('.item-signUp button').click();\n    });\n\n    hotkeys(getSetting('login'), () => {\n      $('.item-logIn button').click();\n    });\n  });\n\n  extend(DiscussionPage.prototype, 'oninit', function () {\n    hotkeys(getSetting('back'), () => {\n      app.history.back();\n    });\n\n    hotkeys(getSetting('pinNav'), () => {\n      app.pane.togglePinned.bind(app.pane)();\n      app.pane.hide();\n    });\n\n    hotkeys(getSetting('follow'), () => {\n      $('.SubscriptionMenu-button').click();\n    });\n\n    hotkeys(getSetting('reply'), () => {\n      $('.SplitDropdown-button').click();\n    });\n\n    hotkeys(getSetting('firstPost'), () => {\n      app.current.data.stream.goToFirst();\n    });\n\n    hotkeys(getSetting('lastPost'), () => {\n      app.current.data.stream.goToLast();\n    });\n  });\n\n  extend(DiscussionList.prototype, 'oninit', function () {\n    hotkeys(getSetting('refresh'), () => {\n      $('.item-refresh button').click();\n    });\n\n    hotkeys(getSetting('markAllAsRead'), () => {\n      $('.item-markAllAsRead button').click();\n    });\n  });\n});\n"],"sourceRoot":""}